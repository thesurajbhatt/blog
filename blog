
    {
        string conStr = "";
        string sqlQuery = "";
        SqlConnection con;
        SqlCommand cmd;
        SqlDataReader dr;

        public Service1()
        {
           conStr = "";
        }

        public string insertData(StudentClass stud)
        {
            sqlQuery = "INSERT INTO Student_Mst(name, email, dob, mobno) VALUES('"+ stud.name + "','" + stud.email + "','" + stud.dob + "'," + stud.mobno + ")";
            con = new SqlConnection(conStr);
            cmd = new SqlCommand(sqlQuery,con);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
            return "Inserted.";
        }

        public string updateData(StudentClass stud)
        {
            sqlQuery = "UPDATE Student_Mst SET name = '" + stud.name + "', email = '" + stud.email + "', dob = '" + stud.dob + "', mobno = " + stud.mobno + " WHERE id = "+ stud.id +"";
            con = new SqlConnection(conStr);
            cmd = new SqlCommand(sqlQuery, con);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
            return "Updated.";
        }

        public string deleteData(StudentClass stud)
        {
            sqlQuery = "DELETE FROM Student_Mst WHERE id = " + stud.id + "";
            con = new SqlConnection(conStr);
            cmd = new SqlCommand(sqlQuery, con);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
            return "Deleted.";
        }

        public List<StudentClass> loadData()
        {
            List<StudentClass> studList = new List<StudentClass>();
            StudentClass stud;

            sqlQuery = "SELECT * FROM Student_Mst";
            con = new SqlConnection(conStr);
            cmd = new SqlCommand(sqlQuery, con);
            con.Open();
            dr = cmd.ExecuteReader();
            if(dr.HasRows)
            {
                while(dr.Read())
                {
                    stud = new StudentClass();
                    stud.id = Convert.ToInt32(dr[0].ToString());
                    stud.name = dr[1].ToString();
                    stud.email = dr[2].ToString();
                    stud.dob = DateTime.Parse(dr[3].ToString());
                    stud.mobno = Convert.ToInt64(dr[4].ToString());
                    studList.Add(stud);
                }
            }
            con.Close();
            return studList;
        }
    }
    
    
    
    *****
    
     Service1Client sc;

    protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack)
        {
            loadData();
        }
    }

    protected void btnInsert_Click(object sender, EventArgs e)
    {
        sc = new Service1Client();
        StudentClass stud = new StudentClass();
        stud.name = txtName.Text;
        stud.email = txtEmail.Text;
        stud.dob = DateTime.Parse(txtDob.Text);
        stud.mobno = Convert.ToInt64(txtMobno.Text);
        sc.insertData(stud);
        loadData();
    }

    public void loadData()
    {
        sc = new Service1Client();
        GridView1.DataSource = sc.loadData();
        GridView1.DataBind();
    }

    protected void btnUpadte_Click(object sender, EventArgs e)
    {
        sc = new Service1Client();
        StudentClass stud = new StudentClass();
        stud.id = Convert.ToInt32(txtID.Text);
        stud.name = txtName.Text;
        stud.email = txtEmail.Text;
        stud.dob = DateTime.Parse(txtDob.Text);
        stud.mobno = Convert.ToInt64(txtMobno.Text);
        sc.updateData(stud);
        loadData();
    }

    protected void btnDelete_Click(object sender, EventArgs e)
    {
        sc = new Service1Client();
        StudentClass stud = new StudentClass();
        stud.id = Convert.ToInt32(txtID.Text);
        sc.deleteData(stud);
        loadData();
    }
    
    
    
